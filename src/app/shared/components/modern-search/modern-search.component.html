<!-- Modern Search Component with Debounce -->
<div [class]="fullWidth() ? 'w-full' : 'max-w-md'" class="relative">
  <!-- Search Icon -->
  <div class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none">
    <app-icon name="search" [size]="16"></app-icon>
  </div>
  
  <!-- Input Field -->
  <input 
    #searchInput
    type="text" 
    [value]="query()"
    (input)="onInput($event)"
    (focus)="onFocus()"
    (blur)="onBlur()"
    [placeholder]="placeholder()"
    [disabled]="disabled()"
    class="w-full pl-10 pr-20 py-2.5 rounded-lg text-sm bg-white border 
           border-slate-200 focus:border-teal-400 focus:ring-2 focus:ring-teal-100 
           transition-all outline-none disabled:bg-slate-50 disabled:cursor-not-allowed"
  >
  
  <!-- Action Buttons -->
  <div class="absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1">
    @if (query() && !disabled()) {
      <!-- Clear Button -->
      <button 
        (click)="clear()"
        class="p-1 rounded-full hover:bg-slate-100 text-slate-400 
               hover:text-slate-600 transition-colors"
        type="button"
      >
        <app-icon name="x" [size]="14"></app-icon>
      </button>
    }
    
    @if (isLoading()) {
      <!-- Loading Spinner -->
      <div class="animate-spin text-teal-500">
        <app-icon name="loader" [size]="16"></app-icon>
      </div>
    }
    
    @if (showSearchButton()) {
      <!-- Search Button -->
      <button 
        (click)="search()"
        [disabled]="!query() || disabled()"
        class="px-3 py-1 bg-teal-500 text-white rounded-md text-xs font-medium
               hover:bg-teal-600 transition-colors disabled:opacity-50 
               disabled:cursor-not-allowed"
        type="button"
      >
        Search
      </button>
    }
  </div>
  
  <!-- Results Count -->
  @if (resultsCount() !== null) {
    <div class="absolute -bottom-5 left-0 text-xs text-slate-500">
      {{ resultsCount() }} result{{ resultsCount() !== 1 ? 's' : '' }} found
    </div>
  }
</div>
